class s{constructor(){this.element=document.createElement("div"),this.render()}render(){this.element.replaceChildren();const e=document.createElement("main");e.classList.add("register-page"),e.setAttribute("role","main"),e.setAttribute("aria-label","Registratiepagina");const n=this.createRegistrationForm();e.appendChild(n),this.element.appendChild(e)}createRegistrationForm(){const e=document.createElement("form");e.id="Registratie-Container",e.setAttribute("aria-labelledby","register-title");const n=document.createElement("h3");n.id="register-title",n.textContent="Account Registreren",e.appendChild(n);const t=this.createPersonalSection(),r=this.createContactSection(),a=this.createAddressSection(),o=this.createSubmitButton();return e.appendChild(t),e.appendChild(r),e.appendChild(a),e.appendChild(o),this.addFormEventListener(e),e}createPersonalSection(){const e=document.createElement("div");return e.className="form-section",[{id:"email",type:"email",label:"E-mailadres",required:!0,autocomplete:"email"},{id:"password",type:"password",label:"Wachtwoord",required:!0,autocomplete:"new-password"},{id:"confirm_password",type:"password",label:"Herhaal Wachtwoord",required:!0,autocomplete:"new-password"}].forEach(t=>{const r=this.createFormField(t);e.appendChild(r)}),e}createContactSection(){const e=document.createElement("div");return e.className="form-section",[{id:"first_name",type:"text",label:"Voornaam",required:!0},{id:"last_name",type:"text",label:"Achternaam",required:!0}].forEach(t=>{const r=this.createFormField(t);e.appendChild(r)}),e}createAddressSection(){const e=document.createElement("div");return e.className="form-section",[{id:"date_of_birth",type:"date",label:"Geboortedatum"},{id:"phone_number",type:"tel",label:"Telefoonnummer"},{id:"address",type:"text",label:"Adres"},{id:"city",type:"text",label:"Stad"},{id:"postal_code",type:"text",label:"Postcode"},{id:"country",type:"text",label:"Land"}].forEach(t=>{const r=this.createFormField(t);e.appendChild(r)}),e}createFormField(e){const n=document.createElement("div"),t=document.createElement("label");t.setAttribute("for",e.id),t.textContent=e.label;const r=document.createElement("input");return r.id=e.id,r.type=e.type,r.name=e.id,e.required&&(r.required=!0),e.autocomplete&&(r.autocomplete=e.autocomplete),n.appendChild(t),n.appendChild(r),n}createSubmitButton(){const e=document.createElement("button");return e.type="submit",e.textContent="Registreren",e}addFormEventListener(e){e.addEventListener("submit",async n=>{n.preventDefault();const t=new FormData(e);if(t.get("password")!==t.get("confirm_password")){alert("Wachtwoorden komen niet overeen!");return}const r={firstName:t.get("first_name"),lastName:t.get("last_name"),email:t.get("email"),password:t.get("password"),dateOfBirth:t.get("date_of_birth"),phoneNumber:t.get("phone_number"),address:t.get("address"),city:t.get("city"),postalCode:t.get("postal_code"),country:t.get("country")};try{const a=await fetch("/api/registratie",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),o=await a.json();a.ok?(alert("Registratie succesvol!"),window.location.href="/login"):alert(o.message||"Registratie mislukt!")}catch(a){console.error("Fout bij registreren:",a),alert("Er is een fout opgetreden, probeer opnieuw.")}})}getElement(){return this.element}appendTo(e){e.appendChild(this.element)}}export{s as default};
